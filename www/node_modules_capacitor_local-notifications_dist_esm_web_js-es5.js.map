{"version":3,"sources":["webpack:///node_modules/@capacitor/local-notifications/dist/esm/web.js"],"names":["LocalNotificationsWeb","arguments","pending","hasNotificationSupport","window","Notification","requestPermission","permission","e","name","unimplemented","options","unavailable","notifications","notification","sendNotification","map","id","filter","find","n","checkPermissions","display","value","transformNotificationPermission","_a","toRemove","now","Date","getTime","schedule","at","buildNotification","push","diff","setTimeout","sendPending","localNotification","title","body","addEventListener","onClick","bind","onShow","data","actionId","notifyListeners","WebPlugin"],"mappings":"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","file":"node_modules_capacitor_local-notifications_dist_esm_web_js-es5.js","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class LocalNotificationsWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.pending = [];\n        this.hasNotificationSupport = () => {\n            if (!('Notification' in window) || !Notification.requestPermission) {\n                return false;\n            }\n            if (Notification.permission !== 'granted') {\n                // don't test for `new Notification` if permission has already been granted\n                // otherwise this sends a real notification on supported browsers\n                try {\n                    new Notification('');\n                }\n                catch (e) {\n                    if (e.name == 'TypeError') {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n    }\n    async createChannel() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async deleteChannel() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async listChannels() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async schedule(options) {\n        if (!this.hasNotificationSupport()) {\n            throw this.unavailable('Notifications not supported in this browser.');\n        }\n        for (const notification of options.notifications) {\n            this.sendNotification(notification);\n        }\n        return {\n            notifications: options.notifications.map(notification => ({\n                id: notification.id,\n            })),\n        };\n    }\n    async getPending() {\n        return {\n            notifications: this.pending,\n        };\n    }\n    async registerActionTypes() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async cancel(pending) {\n        this.pending = this.pending.filter(notification => !pending.notifications.find(n => n.id === notification.id));\n    }\n    async areEnabled() {\n        const { display } = await this.checkPermissions();\n        return {\n            value: display === 'granted',\n        };\n    }\n    async requestPermissions() {\n        if (!this.hasNotificationSupport()) {\n            throw this.unavailable('Notifications not supported in this browser.');\n        }\n        const display = this.transformNotificationPermission(await Notification.requestPermission());\n        return { display };\n    }\n    async checkPermissions() {\n        if (!this.hasNotificationSupport()) {\n            throw this.unavailable('Notifications not supported in this browser.');\n        }\n        const display = this.transformNotificationPermission(Notification.permission);\n        return { display };\n    }\n    transformNotificationPermission(permission) {\n        switch (permission) {\n            case 'granted':\n                return 'granted';\n            case 'denied':\n                return 'denied';\n            default:\n                return 'prompt';\n        }\n    }\n    sendPending() {\n        var _a;\n        const toRemove = [];\n        const now = new Date().getTime();\n        for (const notification of this.pending) {\n            if (((_a = notification.schedule) === null || _a === void 0 ? void 0 : _a.at) &&\n                notification.schedule.at.getTime() <= now) {\n                this.buildNotification(notification);\n                toRemove.push(notification);\n            }\n        }\n        this.pending = this.pending.filter(notification => !toRemove.find(n => n === notification));\n    }\n    sendNotification(notification) {\n        var _a;\n        if ((_a = notification.schedule) === null || _a === void 0 ? void 0 : _a.at) {\n            const diff = notification.schedule.at.getTime() - new Date().getTime();\n            this.pending.push(notification);\n            setTimeout(() => {\n                this.sendPending();\n            }, diff);\n            return;\n        }\n        this.buildNotification(notification);\n    }\n    buildNotification(notification) {\n        const localNotification = new Notification(notification.title, {\n            body: notification.body,\n        });\n        localNotification.addEventListener('click', this.onClick.bind(this, notification), false);\n        localNotification.addEventListener('show', this.onShow.bind(this, notification), false);\n        return localNotification;\n    }\n    onClick(notification) {\n        const data = {\n            actionId: 'tap',\n            notification,\n        };\n        this.notifyListeners('localNotificationActionPerformed', data);\n    }\n    onShow(notification) {\n        this.notifyListeners('localNotificationReceived', notification);\n    }\n}\n//# sourceMappingURL=web.js.map"]}